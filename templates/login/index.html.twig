{% extends 'base.html.twig' %}

{% block title %}Login!{% endblock %}

{% block body %}
    <div class="user-area pt-100 pb-70">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="user-all-form">
                        <div class="contact-form">
                            <h3> Log In Now</h3>
                            <div class="bar"></div>
                            <form action="{{ path('login') }}" method="post">
                                {% if error %}
                                    <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                                {% endif %}

                                {% if app.user %}
                                    <div class="mb-3">
                                        You are logged in as {{ app.user.nom }}, <a href="{{ path('logout') }}">Logout</a>
                                    </div>
                                {% endif %}

                                <div class="row">
                                    <div class="col-lg-12 ">
                                        <div class="form-group">
                                            <label>Email</label>
                                            <input type="text" id="username" name="_username" class="form-control" data-error="Please enter your Username or Email" value="{{ last_username }}"/>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-group">
                                            <label>Password</label>
                                            <input class="form-control" type="password" id="password" name="_password"/>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 form-condition">
                                        <div class="agree-label">
                                            <input type="checkbox" id="remember_me" name="_remember_me" />
                                            <label for="remember_me">Keep me logged in<a class="forget" href="{{ path('app_forgot_password_request') }}">Forgot My Password?</a></label>
                                        </div>
                                    </div>
                                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                                    <div class="col-lg-12 col-md-12 text-center">
                                        <button type="submit" class="default-btn disabled" style="pointer-events: all; cursor: pointer;">
                                            Log in now
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="coming-soon-area ptb-100">
                        <div class="d-table">
                            <div class="d-table-cell">
                                <div class="container">
                                    <div class="coming-soon-content">
                                        <img src="" alt="Random Image" id="randomImage">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const images = [
            'images/user-img/login-photo1.jpg',
            'images/user-img/login-photo2.jpg',
            'images/user-img/login-photo3.jpg',
        ];

        // Fonction pour choisir une image aléatoire
        function getRandomImage() {
            const randomIndex = Math.floor(Math.random() * images.length);
            return images[randomIndex];
        }

        // Fonction pour afficher l'image aléatoire
        function displayRandomImage() {
            const imgElement = document.getElementById('randomImage');
            imgElement.src = getRandomImage();
        }

        // Appelle la fonction pour afficher une image aléatoire au chargement de la page
        window.addEventListener('load', displayRandomImage);
    </script>
{% endblock %}
